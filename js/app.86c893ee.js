(function(t){function e(e){for(var a,r,i=e[0],c=e[1],l=e[2],u=0,d=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);v&&v(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,r=1;r<n.length;r++){var i=n[r];0!==s[i]&&(a=!1)}a&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},r={app:0},s={app:0},o=[];function i(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"f988fae8"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={about:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({about:"about"}[t]||t)+"."+{about:"54d22f01"}[t]+".css",s=c.p+a,o=document.getElementsByTagName("link"),i=0;i<o.length;i++){var l=o[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===s))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===a||u===s)return e()}var v=document.createElement("link");v.rel="stylesheet",v.type="text/css",v.onload=e,v.onerror=function(e){var a=e&&e.target&&e.target.src||s,o=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete r[t],v.parentNode.removeChild(v),n(o)},v.href=s;var f=document.getElementsByTagName("head")[0];f.appendChild(v)})).then((function(){r[t]=0})));var a=s[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,n){a=s[t]=[e,n]}));e.push(a[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(v);var n=s[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}s[t]=void 0}};var v=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/loveprint-web-client/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var v=u;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0016":function(t,e){t.exports="## Summary\r\nHistory!!\r\n### New Features\r\n- Starting now, everything you print will be saved on your phone! This means you can re-print previous messages :)\r\n<br/>\r\n"},"025e":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return d})),n.d(e,"e",(function(){return v}));n("c740"),n("a434"),n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("96cf");var a=n("1da1"),r=n("bc3a"),s=n.n(r),o=n("4360");function i(t){var e=JSON.parse(localStorage.getItem("history")||"[]");return e.unshift(t),localStorage.setItem("history",JSON.stringify(e)),e}function c(t){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.a.post(o["a"].state.lovePrintAddress+"/api/print-text",e);case 2:return n=t.sent,t.abrupt("return",n.data||{});case 4:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function u(){return JSON.parse(localStorage.getItem("history")||"[]")}function d(t){var e=u(),n=e.findIndex((function(e){return e.id===t.id}));n>=0&&e.splice(n,1),localStorage.setItem("history",JSON.stringify(e))}function v(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)}))}},"034f":function(t,e,n){"use strict";n("85ec")},1:function(t,e){},"1ec8":function(t,e,n){t.exports=n.p+"img/loveprint-logo.fcdaa49a.png"},2:function(t,e){},3:function(t,e){},"3c7b":function(t,e,n){t.exports=n.p+"img/loveprint-logo-white.1ad88a35.png"},4360:function(t,e,n){"use strict";var a=n("2b0e"),r=n("2f62"),s=n("bfa9");a["a"].use(r["a"]),e["a"]=new r["a"].Store({state:{lovePrintAddress:"https://lp-api.loveprint.local:2053",hasPaper:!0,username:"",lastSetVersion:"0.0.0"},mutations:{setHasPaper:function(t,e){t.hasPaper=e},setUsername:function(t,e){t.username=e}},actions:{},modules:{},plugins:[(new s["a"]).plugin]})},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("update-information",{attrs:{"update-info":t.updateInfo,"show-update-panel":t.updated},on:{"close-dialog":function(e){t.updated=!1}}}),n("AppBar",{on:{"change-username":t.showModal,"show-info":function(e){t.updated=!0}}}),n("SignInComponent",{ref:"signin"}),n("v-main",{attrs:{id:"main"}},[n("transition",{attrs:{name:"fade"}},[n("keep-alive",[n("router-view")],1)],1)],1),n("v-footer",[n("v-bottom-navigation",{attrs:{color:"primary",app:"",grow:"",id:"bottom-bar",shift:"",height:"90px"}},[n("v-btn",{attrs:{to:"/",height:"100%"}},[n("span",[t._v("Dashboard")]),n("v-icon",[t._v("mdi-home")])],1),n("v-btn",{attrs:{to:"History",height:"100%"}},[n("span",[t._v("History")]),n("v-icon",[t._v("mdi-history")])],1)],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{id:"app-bar",app:""}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"LovePrint logo",contain:"",src:t.getLogo,transition:"scale-transition",width:"40"}}),n("v-toolbar-title",{staticClass:"ms-1"},[t._v("LovePrint")])],1),n("v-spacer"),n("div",[n("v-col",{attrs:{cols:"2"}},[n("v-row",[n("span",{staticStyle:{"font-size":"0.7em"}},[t._v(" Name ")])]),n("v-row",[n("a",{on:{click:function(e){return t.$emit("change-username")}}},[t._v(" "+t._s(t.getUsername)+" ")])])],1)],1),n("div",{staticClass:"d-flex",attrs:{id:"status-icons"}},[n("div",[t.connecting?n("v-progress-circular",{attrs:{indeterminate:"",size:"20"}}):t._e()],1),t.connected&&!t.connecting?n("v-icon",{attrs:{color:"green"}},[t._v("mdi-check-circle")]):n("v-icon",{attrs:{color:"red"}},[t._v("mdi-alert-circle")]),t.isPaperEmpty?n("v-icon",{staticClass:"blink",attrs:{color:"red"}},[t._v("mdi-printer-alert")]):t._e(),n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.$emit("show-info")}}},[n("v-icon",[t._v("mdi-information-outline")])],1)],1)],1)},i=[],c=(n("96cf"),n("1da1")),l=n("bc3a"),u={name:"AppBar",mounted:function(){this.getPrinterStatus()},computed:{isPaperEmpty:function(){return!this.$store.state.hasPaper},getLogo:function(){return this.$vuetify.theme.dark?n("3c7b"):n("1ec8")},getUsername:function(){return this.$store.state.username}},data:function(){return{connected:!1,connecting:!0}},methods:{getPrinterStatus:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.get(t.$store.state.lovePrintAddress+"/api/get-status");case 3:n=e.sent,t.connecting=!1,t.connected=!0,t.$store.commit("setHasPaper",n.data["paper"]),e.next=15;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0),t.connecting=!1,t.connected=!1,setTimeout((function(){t.getPrinterStatus()}),5e3);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))()}}},d=u,v=(n("d417"),n("2877")),f=n("6544"),h=n.n(f),m=n("40dc"),p=n("8336"),g=n("62ad"),b=n("132d"),w=n("adda"),x=n("490a"),y=n("0fd9"),k=n("2fa4"),S=n("2a7f"),C=Object(v["a"])(d,o,i,!1,null,"b14af136",null),_=C.exports;h()(C,{VAppBar:m["a"],VBtn:p["a"],VCol:g["a"],VIcon:b["a"],VImg:w["a"],VProgressCircular:x["a"],VRow:y["a"],VSpacer:k["a"],VToolbarTitle:S["a"]});var V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:!this.$store.state.username,"max-width":"350","content-class":"rounded-xl"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v(" Who are you? ")]),n("v-divider"),n("v-card-actions",{staticClass:"pt-0"},[n("v-form",{staticStyle:{width:"100%"}},[n("v-container",[n("v-col",[n("v-row",[n("v-text-field",{attrs:{label:"Name",required:"",counter:"",rules:[t.rules.counter],maxlength:"10"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setUsername(e)}},model:{value:t.usernameField,callback:function(e){t.usernameField=e},expression:"usernameField"}})],1),t.passwordNeeded?n("v-row",[n("v-text-field",{attrs:{required:"",type:"password",label:"Passphrase"}})],1):t._e(),n("v-row",{attrs:{justify:"center"}},[n("v-btn",{attrs:{color:"primary",elevation:"5"},on:{click:t.setUsername}},[t._v(" Continue ")])],1)],1)],1)],1)],1)],1)],1)},P=[],M=(n("498a"),{name:"SignInComponent",mounted:function(){""===this.$store.state.username&&(this.showModal=!0)},data:function(){return{showModal:!1,formValid:!1,usernameField:"",passwordNeeded:!1,rules:{counter:function(t){return t.length<=10||"Max 10 characters"}}}},methods:{displayModal:function(){this.showModal=!0},setUsername:function(){0!==this.usernameField.trim().length&&(this.$store.commit("setUsername",this.usernameField),this.showModal=!1)}}}),j=M,$=n("b0af"),I=n("99d9"),O=n("a523"),T=n("169a"),A=n("ce7e"),E=n("4bd4"),F=n("8654"),D=Object(v["a"])(j,V,P,!1,null,"99d0ff3e",null),H=D.exports;h()(D,{VBtn:p["a"],VCard:$["a"],VCardActions:I["a"],VCardTitle:I["c"],VCol:g["a"],VContainer:O["a"],VDialog:T["a"],VDivider:A["a"],VForm:E["a"],VRow:y["a"],VTextField:F["a"]});var N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{staticClass:"overflow-hidden",attrs:{"max-width":"800px"},model:{value:t.showUpdatePanel,callback:function(e){t.showUpdatePanel=e},expression:"showUpdatePanel"}},[n("v-card",[n("v-card-title",[t._v(" Whats new? "),n("v-spacer"),t._v(" "+t._s(t.updateInfo.version)+" ")],1),n("v-divider",{staticClass:"pb-4"}),n("v-card-text",{staticClass:"overflow-auto"},[n("div",{domProps:{innerHTML:t._s(t.renderMarkdown)}})]),n("v-card-actions",[n("v-btn",{staticClass:"text-right",attrs:{block:"",outlined:"",color:"primary"},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},z=[],B=n("0e54"),U={name:"UpdateInformation",data:function(){return{dialog:!1}},props:["updateInfo","showUpdatePanel"],computed:{renderMarkdown:function(){return B(this.updateInfo.markdown)}},methods:{closeDialog:function(){this.$emit("close-dialog")}}},L=U,R=Object(v["a"])(L,N,z,!1,null,"8b04a01a",null),J=R.exports;h()(R,{VBtn:p["a"],VCard:$["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VDialog:T["a"],VDivider:A["a"],VSpacer:k["a"]});var q=n("0016"),W=n.n(q),K={name:"App",components:{UpdateInformation:J,SignInComponent:H,AppBar:_},mounted:function(){this.showUpdatePanel()},data:function(){return{updateInfo:{version:"0.4.0",markdown:W.a},updated:!1}},methods:{showModal:function(){this.$refs.signin.displayModal()},showUpdatePanel:function(){var t=this.updateInfo.version===this.$store.state.lastSetVersion;t||(this.updated=!0,this.$store.state.lastSetVersion=this.updateInfo.version)}}},G=K,Q=(n("034f"),n("7496")),X=n("b81c"),Y=n("553a"),Z=n("f6c4"),tt=Object(v["a"])(G,r,s,!1,null,null,null),et=tt.exports;h()(tt,{VApp:Q["a"],VBottomNavigation:X["a"],VBtn:p["a"],VFooter:Y["a"],VIcon:b["a"],VMain:Z["a"]});n("d3b7"),n("159b"),n("ddb0");var nt=n("9483");Object(nt["a"])("".concat("/loveprint-web-client/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){caches.keys().then((function(t){t.forEach((function(t){caches.delete(t)}))})),console.log("New content is downloading."),window.location.reload(!0)},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var at=n("8c4f"),rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("SendMessage")],1)},st=[],ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"text-center",staticStyle:{"max-width":"700px"},attrs:{fluid:""}},[n("v-snackbar",{attrs:{id:"success-snackbar",timeout:"2000",color:"success",top:""},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.successSnackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.successSnackbar,callback:function(e){t.successSnackbar=e},expression:"successSnackbar"}},[t._v(" Message Printed! ðŸ˜€ ")]),n("v-snackbar",{attrs:{id:"error-snackbar",color:"error",top:""},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[n("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.errorSnackbar=!1}}},"v-btn",a,!1),[t._v(" Close ")])]}}]),model:{value:t.errorSnackbar,callback:function(e){t.errorSnackbar=e},expression:"errorSnackbar"}},[t._v(" Error Printing! "),n("br"),t._v(" "+t._s(t.errorMessage)+" ")]),n("v-row",{attrs:{id:"wrapper",justify:"center",align:"center"}},[n("v-col",{staticClass:"mb-0 pb-0",attrs:{cols:"12"}},[n("v-textarea",{staticClass:"elevation-7 rounded-lg",attrs:{height:"130px","no-resize":"",solo:"","background-color":"accent","hide-details":"",placeholder:"Message to print..."},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1),n("v-col",{staticClass:"mt-2",attrs:{cols:"12"}},[n("PaintPicture",{ref:"picture",on:{"image-changed":t.setImage}})],1),n("v-col",{staticClass:"pa-0 ma-0"},[n("TextFormattingControls",{on:{"formatting-changed":t.setFormatting}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-btn",{staticClass:"mt-0 pt-0",attrs:{"x-large":"",loading:t.sending,color:"primary",elevation:"7",block:"",outlined:"",rounded:""},on:{click:t.sendMessageToServer}},[t._v(" Print ")])],1)],1)],1)},it=[],ct=(n("ac1f"),n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticClass:"ma-0 pa-0 mt-0",attrs:{justify:"center"}},[n("v-btn-toggle",{staticClass:"ma-2 elevation-5 rounded-lg",attrs:{id:"align-text",mandatory:""},model:{value:t.formatting.justify,callback:function(e){t.$set(t.formatting,"justify",e)},expression:"formatting.justify"}},[n("v-btn",[n("v-icon",[t._v("mdi-format-align-left")])],1),n("v-btn",[n("v-icon",[t._v("mdi-format-align-center")])],1),n("v-btn",[n("v-icon",[t._v("mdi-format-align-right")])],1)],1),n("v-btn-toggle",{staticClass:"ma-2 elevation-5 rounded-lg",attrs:{id:"text-size3",mandatory:""},model:{value:t.formatting.size,callback:function(e){t.$set(t.formatting,"size",e)},expression:"formatting.size"}},[n("v-btn",[n("h6",[t._v("S")])]),n("v-btn",[n("h5",[t._v("M")])]),n("v-btn",[n("h4",[t._v("L")])])],1),n("v-btn-toggle",{staticClass:"ma-2 elevation-5 rounded-lg",attrs:{id:"text-size",multiple:"",rounded:""},model:{value:t.formatting.text_style,callback:function(e){t.$set(t.formatting,"text_style",e)},expression:"formatting.text_style"}},[n("v-btn",[n("v-icon",[t._v("mdi-format-bold")])],1),n("v-btn",[n("v-icon",{staticStyle:{transform:"rotate(180deg)","padding-top":"6px"}},[t._v("mdi-format-color-text")])],1),n("v-btn",[n("v-icon",[t._v("mdi-format-underline")])],1)],1)],1)}),lt=[],ut={name:"TextFormattingControls",watch:{formatting:{handler:function(t){this.$emit("formatting-changed",t)},deep:!0}},mounted:function(){this.$root.$on("print-history-message",this.setFormattingFromMessage)},data:function(){return{formatting:{justify:1,size:2,text_style:[]}}},methods:{setFormattingFromMessage:function(t){var e=t.formatting;this.formatting=e}}},dt=ut,vt=n("a609"),ft=Object(v["a"])(dt,ct,lt,!1,null,"63e6713a",null),ht=ft.exports;h()(ft,{VBtn:p["a"],VBtnToggle:vt["a"],VIcon:b["a"],VRow:y["a"]});var mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",{staticClass:"ma-0 pa-0"},[n("v-row",{attrs:{justify:"center"}},[""===t.drawing?n("v-btn",{attrs:{rounded:""},on:{click:t.initAndShowCanvas}},[t._v("Add Drawing")]):n("v-card",{staticClass:"text-right"},[n("v-btn",{staticStyle:{right:"0","z-index":"2"},attrs:{icon:"",absolute:""},on:{click:t.clearCanvas}},[n("v-icon",[t._v("mdi-close")])],1),n("v-btn",{staticStyle:{left:"0","z-index":"2"},attrs:{icon:"",absolute:""},on:{click:t.downloadDrawing}},[n("v-icon",[t._v("mdi-download")])],1),n("v-img",{style:t.$vuetify.theme.dark?"-webkit-filter: invert(1);\n   filter: invert(1);":"",attrs:{"max-width":"200",src:t.drawing},on:{click:t.initAndShowCanvas}})],1)],1)],1),n("v-dialog",{attrs:{"max-width":"400"},model:{value:t.showCanvas,callback:function(e){t.showCanvas=e},expression:"showCanvas"}},[n("v-card",{staticClass:"overflow-hidden"},[n("v-card-title",[t._v(" Add Drawing ")]),n("v-card-actions",{staticClass:"mb-2"},[n("v-container",{staticClass:"py-0 my-0"},[n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-slider",{staticClass:"px-3",attrs:{"thumb-label":"",dense:"",label:"Pen Size",min:"1",max:"15","hide-details":""},model:{value:t.penSize,callback:function(e){t.penSize=e},expression:"penSize"}})],1),n("v-row",{attrs:{justify:"space-around",align:"end"}},[n("v-btn",{attrs:{text:""},on:{click:t.clearCanvas}},[t._v("Clear")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",disabled:!t.canUndo},on:{click:t.undo}},[n("v-icon",[t._v("mdi-undo")])],1),n("v-btn",{attrs:{icon:"",disabled:!t.canRedo},on:{click:t.redo}},[n("v-icon",[t._v("mdi-redo")])],1)],1)],1)],1),n("v-divider"),n("v-row",{staticClass:"my-1",attrs:{justify:"center"}},[n("canvas",{staticClass:"rounded",attrs:{id:"canvas",width:"384",height:"384"}})]),n("v-divider"),n("v-card-actions",{staticStyle:{overflow:"hidden"}},[n("v-container",{staticClass:"my-0 py-0"},[n("v-row",{attrs:{justify:"center"}},[n("v-col",[n("v-btn",{attrs:{block:"",text:""},on:{click:function(e){t.showCanvas=!1}}},[t._v("Cancel")])],1),n("v-col",[n("v-btn",{attrs:{block:"",text:"",color:"primary"},on:{click:t.saveCanvasToImage}},[t._v("Add")])],1)],1)],1)],1)],1)],1)],1)},pt=[],gt=(n("fb6a"),n("bf19"),n("7a94")),bt={name:"PaintPicture",data:function(){return{canvas:void 0,showCanvas:!1,drawing:"",stateHistory:[],penSize:5,currentStateIndex:-1}},mounted:function(){this.$root.$on("print-history-message",this.handleHistoryPrint)},watch:{penSize:function(){this.canvas.freeDrawingBrush.width=this.penSize}},computed:{isMobile:function(){return this.$vuetify.breakpoint.mobile},canUndo:function(){return this.currentStateIndex>=0},canRedo:function(){return this.currentStateIndex<this.stateHistory.length-1}},methods:{handleHistoryPrint:function(t){var e=t.image;this.drawing=e},initAndShowCanvas:function(){var t=this;void 0===this.canvas&&setTimeout((function(){t.canvas=t.createCanvas()}),200),this.showCanvas=!0},resetCanvasState:function(){this.canvas&&this.canvas.clear(),this.stateHistory=[],this.drawing="",this.currentStateIndex=-1},clearCanvas:function(){confirm("Are you sure you want to clear the canvas?")&&this.resetCanvasState()},downloadDrawing:function(){var t=document.createElement("a");t.href=this.drawing,t.download="LovePrint-drawing.png",t.click()},createCanvas:function(){var t=new gt["fabric"].Canvas("canvas",{isDrawingMode:!0});return t.freeDrawingBrush.color=this.$vuetify.theme.dark?"white":"black",t.freeDrawingBrush.width=this.penSize,this.registerCanvasEvents(t),t},registerCanvasEvents:function(t){var e=this;t.on("path:created",(function(){var n=t.toJSON();e.currentStateIndex!==e.stateHistory.length-1&&(e.stateHistory=e.stateHistory.slice(0,Math.max(e.currentStateIndex+1,0))),e.currentStateIndex++,e.stateHistory.push(n)}))},undo:function(){0===this.currentStateIndex?(this.canvas.clear(),this.currentStateIndex--):this.canvas=this.canvas.loadFromJSON(this.stateHistory[--this.currentStateIndex])},redo:function(){this.canvas=this.canvas.loadFromJSON(this.stateHistory[++this.currentStateIndex])},saveCanvasToImage:function(){this.canvas.discardActiveObject(),0===this.canvas.getObjects().length?this.drawing="":(this.canvas.getObjects().forEach((function(t){t.set("stroke","black")})),this.drawing=this.canvas.toDataURL("png"),this.resetPathStroke()),this.showCanvas=!1,this.$emit("image-changed",this.drawing)},resetPathStroke:function(){var t=this;this.canvas.getObjects().forEach((function(e){e.set("stroke",t.$vuetify.theme.dark?"white":"black")}))}}},wt=bt,xt=n("ba0d"),yt=Object(v["a"])(wt,mt,pt,!1,null,"95055682",null),kt=yt.exports;h()(yt,{VBtn:p["a"],VCard:$["a"],VCardActions:I["a"],VCardTitle:I["c"],VCol:g["a"],VContainer:O["a"],VDialog:T["a"],VDivider:A["a"],VIcon:b["a"],VImg:w["a"],VRow:y["a"],VSlider:xt["a"],VSpacer:k["a"]});var St=n("025e"),Ct={name:"MainScreen",components:{PaintPicture:kt,TextFormattingControls:ht},data:function(){return{image:"",message:"",sending:!1,successSnackbar:!1,errorSnackbar:!1,errorMessage:"",formatting:{justify:1,size:2,text_style:[]}}},mounted:function(){this.$root.$on("print-history-message",this.setMessageContents)},methods:{setMessageContents:function(t){var e=t.message;this.message=e},setImage:function(t){this.image=t},isMessageContent:function(){var t=this.message.trim().length>0,e=this.image.length>0;return t||e},saveMessageToStore:function(){var t={message:this.message,formatting:this.formatting,image:this.image,time:new Date,id:Object(St["e"])()};Object(St["a"])(t),this.$root.$emit("new-message",t)},sendMessageToServer:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isMessageContent()){t.next=2;break}return t.abrupt("return");case 2:if(!(this.message.split(" ").length>40)){t.next=6;break}return alert("Pls dont use all my paper..."),this.message="pls",t.abrupt("return");case 6:return t.prev=6,this.sending=!0,this.saveMessageToStore(),t.next=11,Object(St["d"])({message:this.message,formatting:this.formatting,username:this.$store.state.username,image:this.image});case 11:e=t.sent,"paper"in e&&this.$store.commit("setHasPaper",e["paper"]),this.successSnackbar=!0,this.message="",this.image="",this.$refs.picture.resetCanvasState(),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](6),t.t0.response&&t.t0.response.data&&"paper"in t.t0.response.data?(this.$store.commit("setHasPaper",t.t0.response.data["paper"]),this.errorMessage=t.t0.response.data.error,this.errorSnackbar=!0):(this.errorMessage="Error when sending message: "+t.t0,this.errorSnackbar=!0),console.log(t.t0);case 23:return t.prev=23,this.sending=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,this,[[6,19,23,26]])})));function e(){return t.apply(this,arguments)}return e}(),setFormatting:function(t){this.formatting=t}}},_t=Ct,Vt=n("2db4"),Pt=n("a844"),Mt=Object(v["a"])(_t,ot,it,!1,null,null,null),jt=Mt.exports;h()(Mt,{VBtn:p["a"],VCol:g["a"],VContainer:O["a"],VRow:y["a"],VSnackbar:Vt["a"],VTextarea:Pt["a"]});var $t={components:{SendMessage:jt},name:"Dashboard"},It=$t,Ot=Object(v["a"])(It,rt,st,!1,null,"6ab9869a",null),Tt=Ot.exports;a["a"].use(at["a"]);var At=[{path:"/",name:"Home",component:Tt},{path:"/history",name:"History",component:function(){return n.e("about").then(n.bind(null,"e4bb"))}},{path:"/settings",name:"Settings",component:function(){return n.e("about").then(n.bind(null,"26d3"))}}],Et=new at["a"]({routes:At}),Ft=Et,Dt=n("4360"),Ht=n("f309");a["a"].use(Ht["a"]);var Nt=window.matchMedia("(prefers-color-scheme: dark)");Nt.addListener((function(t){zt.framework.theme.dark=t.matches}));var zt=new Ht["a"]({theme:{dark:Nt.matches,themes:{light:{primary:"#eb4034",secondary:"#575757",accent:"#ffffff"},dark:{primary:"#eb4034",secondary:"#575757",accent:"#303030"}}}}),Bt=zt;a["a"].config.productionTip=!1,new a["a"]({router:Ft,store:Dt["a"],vuetify:Bt,render:function(t){return t(et)}}).$mount("#app")},"85ec":function(t,e,n){},"8a02":function(t,e,n){},d417:function(t,e,n){"use strict";n("8a02")}});
//# sourceMappingURL=app.86c893ee.js.map